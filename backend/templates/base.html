<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}CollabHub{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#000000',
                        'secondary': '#1a1a1a',
                        'accent': '#333333',
                        'light': '#f8f9fa',
                        'border': '#e5e7eb'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">

<!-- Header -->
<header class="bg-white border-b border-gray-200 p-4 flex justify-between items-center">
    <a href="/" class="text-xl font-bold text-black hover:text-gray-600 transition">CollabHub</a>
    
    {% if user %}
    <!-- User info and burger menu -->
    <div class="flex items-center space-x-4">
        <!-- User avatar and name (clickable) -->
        <a href="/profile/{{ user.email }}" class="flex flex-col items-center space-y-1 hover:opacity-80 transition">
            <img src="{{ user.avatar or '/static/defaultAvatar.jpg' }}" 
                 alt="avatar" class="w-8 h-8 rounded-full object-cover">
            <span class="text-gray-700 text-xs hidden sm:block">–ü—Ä–∏–≤–µ—Ç, {{ user.name or user.email }}</span>
        </a>
        
        <!-- Burger menu button -->
        <button id="mobile-menu-button" class="text-gray-700 hover:text-black transition" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </div>
    
    <!-- Dropdown Menu -->
    <div id="mobile-menu" class="hidden absolute top-16 right-4 w-64 bg-white border border-gray-200 rounded-lg shadow-xl z-50">
        <div class="p-4 border-b">
            <a href="/profile/{{ user.email }}" class="flex items-center space-x-3 hover:bg-gray-50 p-2 rounded transition">
                <img src="{{ user.avatar or '/static/defaultAvatar.jpg' }}" 
                     alt="avatar" class="w-10 h-10 rounded-full object-cover">
                <div>
                    <p class="font-medium text-gray-900">{{ user.name or user.email }}</p>
                    <p class="text-sm text-gray-600">{{ user.email }}</p>
                </div>
            </a>
        </div>
        <div class="p-2">
            <a href="/" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition">üìã –ü—Ä–æ–µ–∫—Ç—ã</a>
            <a href="/applications" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition">üìù –û—Ç–∫–ª–∏–∫–∏</a>
            <a href="/reviews" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition">‚≠ê –û—Ç–∑—ã–≤—ã</a>
            <a href="/messages" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition relative">
                üí¨ –°–æ–æ–±—â–µ–Ω–∏—è
                {% if user.unread_messages_count and user.unread_messages_count > 0 %}
                <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center">
                    {{ user.unread_messages_count }}
                </span>
                {% endif %}
            </a>
            <a href="/profiles" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
            <a href="/profile" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded transition">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
            <a href="/logout" class="block px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded transition">üö™ –í—ã–π—Ç–∏</a>
        </div>
    </div>
    {% else %}
    <nav class="flex space-x-4">
        <a href="/login" class="px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition text-sm font-medium">
            üîë –í–æ–π—Ç–∏
        </a>
        <a href="/register" class="px-4 py-2 border border-black text-black rounded-lg hover:bg-black hover:text-white transition text-sm font-medium">
            üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        </a>
    </nav>
    {% endif %}
</header>

<script>
// Mobile menu toggle
document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!mobileMenuButton.contains(event.target) && !mobileMenu.contains(event.target)) {
                mobileMenu.classList.add('hidden');
            }
        });
    }
});
</script>

{% block content %}{% endblock %}

</body>
</html>
